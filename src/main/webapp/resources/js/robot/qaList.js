// Q&A 陣列宣告===================================================
var qaList = [
  // 卡片====================================================================================
  { Q:"玩偶", A:"<a href='https://speakitup.nctu.me/product/showProductInfo/4' \
  target='_blank' \
  style='text-decoration:none;'>\
  <img class='card__cover' src='https://i.imgur.com/LgMJD2h.jpg'>\
  <div class='card__description'>2020要抒拉論壇高人氣吉祥物玩偶，小天使抱枕！</div>\
  <div class='card__btn-link'>\
  <span>點擊前去看看 >></span>\
  </div>\
  </a>\
      \
  |<a href='https://speakitup.nctu.me/product/showProductInfo/12' \
  target='_blank' \
  style='text-decoration:none;'>\
  <img class='card__cover' src='https://i.imgur.com/4yN2Alu.jpg'>\
  <div class='card__description'>2020要抒拉論壇高人氣吉祥物玩偶，小惡魔抱枕！</div>\
  <div class='card__btn-link'>\
  <span>點擊前去看看 >></span>\
  </div>\
  </a>"},

//  { Q:"貼圖", A:"<a href='https://store.line.me/stickershop/product/12999/zh-Hant' \
//  target='_blank' \
//  style='text-decoration:none;'>\
//  <img class='card__cover' src='https://i.imgur.com/Rf1WqoS.png'>\
//  <div class='card__description'>2020要抒拉論壇人氣票選TOP10，LINE最新貼圖！</div>\
//  <div class='card__btn-link'>\
//  <span>點擊前去看看 >></span>\
//  </div>\
//  </a>\
//  \
//  |<a href='https://store.line.me/stickershop/product/12999/zh-Hant' \
//  target='_blank' \
//  style='text-decoration:none;'>\
//  <img class='card__cover' src='https://i.imgur.com/UG9fu32.png'>\
//  <div class='card__description'>2020要抒拉論壇人氣票選TOP10，LINE最新貼圖！</div>\
//  <div class='card__btn-link'>\
//  <span>點擊前去看看 >></span>\
//  </div>\
//  </a>"},
  // 卡片====================================================================================
    { Q:"員|站長|經理|客服|克服", A:"客服Email: speakitup002@gmail.com"},
    { Q:"唱歌", A:"喔～妳是我的花朵 我要擁有妳 插在我心窩 喔～妳是我的花朵 我要保護妳 一路都暢通 喔～妳是我的花朵 就算妳身邊 很多小石頭 喔～妳是我的花朵 我要愛著妳 不眠也不休"},
    { Q:"惡魔", A:"<a href='https://speakitup.nctu.me/article/showPageArticles?categoryTitle=惡魔' \
    target='_blank' \
    style='text-decoration:none;'>\
    <img class='card__cover' src='https://i.imgur.com/1eh1Wkq.jpg'>\
    <div class='card__description'>要抒拉論壇人氣<span style='color:blue'>惡魔版</span>，壓抑一整天想找個地方抒發嗎?來惡魔版就對了！</div>\
    <div class='card__btn-link'>\
    <span>點擊前去看看 >></span>\
    </div>\
    </a>"},
    { Q:"抱怨|論壇", A:"<a href='https://speakitup.nctu.me/article/showPageArticles?categoryTitle=惡魔' \
        target='_blank' \
        style='text-decoration:none;'>\
        <img class='card__cover' src='https://i.imgur.com/1eh1Wkq.jpg'>\
        <div class='card__description'>要抒拉論壇人氣<span style='color:blue'>惡魔版</span>，壓抑一整天想找個地方抒發嗎?來惡魔版就對了！</div>\
        <div class='card__btn-link'>\
        <span>點擊前去看看 >></span>\
        </div>\
        </a><hr><a href='https://speakitup.nctu.me/article/showPageArticles?categoryTitle=天使' \
    target='_blank' \
    style='text-decoration:none;'>\
    <img class='card__cover' src='https://i.imgur.com/D3MXcYP.jpg'>\
    <div class='card__description'>要抒拉論壇人氣<span style='color:blue'>天使版</span>，一肚子委屈想找個人安慰、拍拍嗎?來天使版就對了！</div>\
    <div class='card__btn-link'>\
    <span>點擊前去看看 >></span>\
    </div>\
    </a>"},
    

    { Q:"天使", A:"<a href='https://speakitup.nctu.me/article/showPageArticles?categoryTitle=天使' \
    target='_blank' \
    style='text-decoration:none;'>\
    <img class='card__cover' src='https://i.imgur.com/D3MXcYP.jpg'>\
    <div class='card__description'>要抒拉論壇人氣<span style='color:blue'>天使版</span>，一肚子委屈想找個人安慰、拍拍嗎?來天使版就對了！</div>\
    <div class='card__btn-link'>\
    <span>點擊前去看看 >></span>\
    </div>\
    </a>"},

    { Q:"首頁", A:"<a href='https://speakitup.nctu.me' \
    target='_blank' \
    style='text-decoration:none;'>\
    <img class='card__cover' src='https://i.imgur.com/6UJgJhM.jpg'>\
    <div class='card__description'><span style='color:blue'>要抒啦！論壇</span>是個能夠預期回應溫度的論壇空間。無論感情、生活、工作、時事都可以聊。</div>\
    <div class='card__btn-link'>\
    <span>點擊前去看看 >></span>\
    </div>\
    </a>"},

    { Q:"商城", A:"<a href='https://speakitup.nctu.me/product/productHome' \
    target='_blank' \
    style='text-decoration:none;'>\
    <img class='card__cover' src='https://i.imgur.com/6UJgJhM.jpg'>\
    <div class='card__description'>商城「<span style='color:blue'>要買啦！</span>💸」，各種新奇有趣的商品都在這裡。</div>\
    <div class='card__btn-link'>\
    <span>點擊前去看看 >></span>\
    </div>\
    </a>"},
    
    { Q:"影片", A:"\
        <iframe width='350' height='350'\
        src='https://www.youtube.com/embed/LKwvtF1Y6Pw'\
        frameborder='0' allow='accelerometer; autoplay; encrypted-media;\
         gyroscope; picture-in-picture' allowfullscreen></iframe>"},
    
    { Q:"謝", A:"不客氣!|謝謝你的體驗，歡迎下次光臨"},
    { Q:"對不起|抱歉|不好意思", A:"別客氣，儘管說!"},
    { Q:"你好|嗨|您好|安|hi|嘿", A:"你好，我是要抒拉智能客服，有甚麼問題都可以問我哦!!"},
    ];  
// 取得QA====================================================
  function getAnswer() {
    var say = document.getElementById("say").value; // 取得使用者輸入的問句。
    for (var i in qaList) { // 對於每一個 QA 
     try {
      var qa = qaList[i];
      var qList = qa.Q.split("|"); // 取出 Q 部分，分割成一個一個的問題字串 q
      var aList = qa.A.split("|"); // 取出回答 A 部分，分割成一個一個的回答字串 q

      for (var qi in qList) { // 對於每個問題字串 q
        var q = qList[qi];
        if (q=="") // 如果是最後一個「空字串」的話，那就不用比對，直接任選一個回答。
          return aList[random(aList.length)]; // 那就從答案中任選一個回答

        var r = new RegExp("(.*)"+q+"([^?.;]*)", "gi"); // 建立正規表達式 (.*) q ([^?.;]*)
        if (say.match(r)) { // 比對成功的話
          tail = RegExp.$2; // 就取出句尾
          tail = tail.replace("我", "#").replace("你", "我").replace("#", "你");// 將問句句尾的「我」改成「你」，「你」改成「我」。
          clear();
          return aList[random(aList.length)].replace(/\*/, tail); // 然後將 * 改為句尾進行回答
        }
      }
     } catch (err) {}
    }clear();
    return "不明白，請換個問題或聯繫客服 2835-3415"; // 如果發生任何錯誤，就回答「不明白，請聯繫客服000-111-222」來混過去。
  }   

  //回答樣式1=====================================================
function append(line) { // 將 line 放到「對話區」顯示。
  var dialogBox = document.getElementById("dialogBox"); // 取出對話框 
  answerQ = document.createElement('div');//Q=新增DIV元件
  answerQ.style.margin = '0px';    
  answerQservice=document.createElement('div');
  answerQservice.setAttribute("class",'es_service');
  answerQheadBox=document.createElement('div');
  answerQheadBox.setAttribute("class",'es_headBox');
  answerQhead = document.createElement('div');
  answerQhead.setAttribute("class",'es_head');//Qimg的屬性class=es_head
  answerQbotName=document.createElement('span');
  answerQbotName.setAttribute("class",'es_botName');
  answerQbotName.innerHTML="智能客服";
  answerQscBox=document.createElement('div');
  answerQscBox.setAttribute("class",'es_scBox');
  // 實驗=================================================
  for (var i in qaList) { // 對於每一個 QA 
     var qa = qaList[i];
     var qList = qa.Q.split("|"); // 取出 Q 部分，分割成一個一個的問題字串 q
      for (var qi in qList) { // 對於每個問題字串 q
       var q = qList[qi];
        if (q=="蛋糕"){
          answerQscTxt2=document.createElement('div');
          answerQscTxt2.setAttribute("class",'es_scTxt2');
          answerQscTxt2.innerHTML=line;
          answerQscBox.appendChild(answerQscTxt2);
        }
        else{
          answerQscTxt=document.createElement('div');
          answerQscTxt.setAttribute("class",'es_scTxt');
          answerQscTxt.innerHTML=line;
          answerQscBox.appendChild(answerQscTxt);
        }
      }
      break;
  }
  // 實驗=================================================
  answerQheadBox.appendChild(answerQhead);
  answerQheadBox.appendChild(answerQbotName);
  answerQservice.appendChild(answerQheadBox);
  answerQservice.appendChild(answerQscBox);
  answerQ.appendChild(answerQservice);
  dialogBox.appendChild(answerQ);
  dialogBox.scrollTop = dialogBox.scrollHeight;
}
//回答========================================================
function answer() { 
 setTimeout(function () {
    append(getAnswer());
  }
  ,1000
 );}


